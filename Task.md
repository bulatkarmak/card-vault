# Задача: Реализация gRPC-сервиса для хранения и управления пользовательскими реквизитами карт с использованием cron для асинхронного удаления

## 1. Проектирование базы данных
- Спроектировать структуру базы данных с учетом нормализации. Создать минимум три таблицы:
    - **Пользователи**: таблица для хранения информации о пользователях (например, имя, email, телефон и т.д.).
    - **Банки**: таблица для хранения информации о банках (например, название банка, BIC, адрес и т.д.).
    - **Карты**: таблица для хранения реквизитов карт, привязанных к пользователям и банкам (номер карты, срок действия, пользователь, банк и т.д.).

## 2. Реализация gRPC API для работы с картами и пользователями
- Разработать gRPC сервис с методами для управления картами и пользователями:
    - **Создание** карт и пользователей:
        - `CreateUser` для создания пользователя.
        - `CreateCard` для создания карты, привязанной к пользователю и банку.
    - **Обновление** карт и пользователей:
        - `UpdateUser` для обновления информации о пользователе.
        - `UpdateCard` для обновления реквизитов карты.
    - **Удаление** карт и пользователей:
        - `DeleteUser` для удаления пользователя.
        - `DeleteCard` для удаления карты.
- Разработать соответствующие Proto файлы с описанием всех методов и сообщений.

## 3. Настройка и запуск gRPC сервера
- Реализовать и настроить gRPC сервер, который будет обслуживать вышеописанные методы.
- Конфигурация сервера должна загружаться из переменных окружения (ENV) для упрощения управления и настройки окружения.

## 4. Асинхронное удаление просроченных карт с использованием cron
- Реализовать механизм проверки срока действия карт с помощью cron-задачи:
    - Настроить cron-задачу, которая будет запускаться периодически (например, раз в сутки).
    - При каждом запуске cron-задачи будет выполняться проверка базы данных на наличие карт с истекшим сроком действия.
    - При обнаружении просроченных карт, cron-задача инициирует отправку сообщений в Kafka (можно отправлять только ID карты) о необходимости удаления карты.
- Настроить consumer для Kafka, который будет прослушивать сообщения и выполнять удаление карт, у которых истек срок действия.

## 5. Мониторинг и логирование
- Внедрить систему логирования для отслеживания работы cron-задачи, gRPC запросов и Kafka consumer'а.
- Продумать механизм мониторинга состояния сервиса и его компонентов (возможно, с использованием Prometheus или другой системы мониторинга).

## 6. Тестирование
- Провести тестирование всех компонентов системы: gRPC методов, cron-задачи, Kafka producer'а и consumer'а.
- Убедиться, что система корректно удаляет просроченные карты и поддерживает актуальность данных.
